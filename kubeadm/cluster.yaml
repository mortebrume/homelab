---
# yaml-language-server: $schema=https://www.schemastore.org/any.json
apiVersion: kubeadm.k8s.io/v1beta4
kind: InitConfiguration
ignorePreflightErrors:
  - Swap
localAPIEndpoint:
  advertiseAddress: 100.115.152.117
  bindPort: 6443
nodeRegistration:
  taints: []
---
# yaml-language-server: $schema=https://www.schemastore.org/any.json
apiVersion: kubeadm.k8s.io/v1beta4
kind: ClusterConfiguration
clusterName: homelab
controlPlaneEndpoint: "100.115.152.117:6443"
encryptionAlgorithm: ECDSA-P384
networking:
  podSubnet: "10.20.0.0/16,fd00::/108"
  serviceSubnet: "10.40.0.0/16,fd01::/108"
apiServer:
  certSANs:
    - server
    - server.minuet-betelgeuse.ts.net
    - "100.115.152.117"
    - "fd7a:115c:a1e0::b901:9883"
    - "127.0.0.1"
    - localhost
    - "::1"
  extraArgs:
    runtime-config: "admissionregistration.k8s.io/v1beta1=true"
    feature-gates: "MutatingAdmissionPolicy=true"
dns:
  disabled: true
proxy:
  disabled: true
etcd:
  local:
    dataDir: /var/lib/etcd
---
# yaml-language-server: $schema=https://www.schemastore.org/any.json
apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
failOnSwap: false
featureGates:
  ImageVolume: true
maxPods: 300
shutdownGracePeriod: 30s
shutdownGracePeriodCriticalPods: 10s
